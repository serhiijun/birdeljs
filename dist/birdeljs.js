import{createConsumer as m}from"@rails/actioncable";var r=class{constructor({log:t}={}){this.actors={},this.queueBumps=[],this.log=t}pushBump(t){this.queueBumps.push(t)}removeActor(t){let s=t.name.split("--").pop(),c=this.actorCamelized(s)+"Actor",e=this.actors[c].indexOf(t);e>-1&&this.actors[c].splice(e,1)}addActor(t){let s=t.name.split("--").pop(),c=this.actorCamelized(s)+"Actor";this.actors[c]||(this.actors[c]=[]),this.actors[c].push(t)}getActor(t,s,{resourceId:c}={}){c=c||!1;let e=this.actorCamelized(s);return this.actors[e].find(a=>a.name==t&&a.resourceId==c)}forward(t,s,{data:c,resourceId:e}={}){e=e||!1;let[a,i]=s.split("#"),o=this.getActor(t,a,{resourceId:e});o[i].call(o,c)}subscribe({channel:t,id:s}={}){let c=m();this.channel=c.subscriptions.create({channel:t,id:s},{connected:()=>{this.log&&console.log("connected"),this.queueBumps.forEach(e=>{this.forward(e.componentCssClass,e.actorAndMethod,{resourceId:e.resourceId,data:e.e})})},received:e=>{this.log&&console.log(e);let a=e.callback,i=a.component,o=a.actor,h=this.getActor(i,o,{resourceId:a.resourceId});h[a.method].call(h,e.data)},disconnected:()=>{this.log&&console.log("disconnected")}})}send(t){this.channel.perform("actorThrough",t)}actorCamelized(t){return t.split("-").map(s=>s.toUpperCase()[0]+s.slice(1)).join("")}};var n=class{constructor(t){this.element=t,this.name=this.element.dataset.controller,this.resourceId=this.element.dataset.resourceId||!1,window.Birdel.addActor(this)}replace(t,s){let e=new DOMParser().parseFromString(t,"text/html").body.firstChild;s.parentNode.replaceChild(e,s)}};var l=class{static toggleDropdown({bel:t}){t.classList.toggle("b_dw--active")}static closeDropdown({bel:t}){t.classList.remove("b_dw--active")}static toggleSelect({bel:t}){t.classList.contains("b_sel--disabled")||t.classList.toggle("b_sel--active")}static closeSel({bel:t}){t.classList.remove("b_sel--active")}static selectItem({bel:t,selItem:s}){let c=t.getElementsByClassName("b_sel__title")[0];c.innerHTML=s.innerHTML,t.dataset.bselId=s.dataset.itemId}static selectRadio({bel:t}){if(t.classList.contains("b_rad--active"))return;let s=t.dataset.bRadGroup;document.querySelectorAll(`[data-b-rad-group="${s}"]`).forEach(e=>{e.classList.remove("b_rad--active")}),t.classList.add("b_rad--active")}static toggleCheckbox({bel:t}){t.classList.contains("b_chx--active")?t.classList.remove("b_chx--active"):t.classList.add("b_chx--active")}static selectCheckbox({bel:t}){t.classList.contains("b_chx--active")||t.classList.add("b_chx--active")}static unselectCheckbox({bel:t}){t.classList.contains("b_chx--active")&&t.classList.remove("b_chx--active")}static toggleModal({bel:t}){t.classList.toggle("b_modal--active")}};export{n as ActorBase,l as ActorElement,r as ActorForward};
