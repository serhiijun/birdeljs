import{createConsumer as m}from"@rails/actioncable";var r=class{constructor({log:t}={}){this.actors={},this.queueBumps=[],this.log=t}pushBump(t){this.queueBumps.push(t)}removeActor(t){let s=t.name.split("--").pop(),o=this.actorCamelized(s)+"Actor",e=this.actors[o].indexOf(t);e>-1&&this.actors[o].splice(e,1)}addActor(t){let s=t.name.split("--").pop(),o=this.actorCamelized(s)+"Actor";this.actors[o]||(this.actors[o]=[]),this.actors[o].push(t)}getActor(t,s,{resourceId:o}={}){o=o||!1;let e=this.actorCamelized(s);return this.actors[e].find(c=>c.name==t&&c.resourceId==o)}forward(t,s,{data:o,resourceId:e}={}){e=e||!1;let[c,i]=s.split("#"),a=this.getActor(t,c,{resourceId:e});a[i].call(a,o)}subscribe({channel:t,id:s}={}){let o=m();this.channel=o.subscriptions.create({channel:t,id:s},{connected:()=>{this.log&&console.log("connected"),this.queueBumps.forEach(e=>{this.forward(e.componentCssClass,e.actorAndMethod,{resourceId:e.resourceId,data:e.e})})},received:e=>{this.log&&console.log(e);let c=e.callback,i=c.component,a=c.actor,h=this.getActor(i,a,{resourceId:c.resourceId});h[c.method].call(h,e.data)},disconnected:()=>{this.log&&console.log("disconnected")}})}send(t){this.channel.perform("actorThrough",t)}actorCamelized(t){return t.split("-").map(s=>s.toUpperCase()[0]+s.slice(1)).join("")}};var l=class{constructor(t){this.element=t,this.name=this.element.dataset.controller,this.resourceId=this.element.dataset.resourceId||!1,window.Birdel.addActor(this)}replace(t,s){let e=new DOMParser().parseFromString(t,"text/html").body.firstChild;s.parentNode.replaceChild(e,s)}};var n=class{static toggleDropdown({dwEl:t}={}){t.classList.toggle("b_dw--active")}static closeDropdown({dwEl:t}={}){t.classList.remove("b_dw--active")}static toggleSel({sel:t}={}){t.classList.contains("b_sel--disabled")||t.classList.toggle("b_sel--active")}static closeSel({sel:t}={}){t.classList.remove("b_sel--active")}static selectItem({sel:t,selItem:s}={}){let o=t.getElementsByClassName("b_sel__title")[0];o.innerHTML=s.innerHTML,t.dataset.bselId=s.dataset.itemId}static selectRadio({rad:t}={}){let s=t.dataset.bRadGroup,o=document.querySelectorAll(`[data-b-rad-group="${s}"]`);t.classList.contains("b_rad--active")||(o.forEach(e=>{e.classList.remove("b_rad--active")}),t.classList.add("b_rad--active"))}static selectCheckbox({chx:t}={}){t.classList.contains("b_chx--active")?t.classList.remove("b_chx--active"):t.classList.add("b_chx--active")}static toggleModal({modal:t}={}){t.classList.toggle("b_modal--active")}};export{l as ActorBase,n as ActorElement,r as ActorForward};
