import{createConsumer as m}from"@rails/actioncable";var n=class{constructor({log:t}={}){this.actors={},this.queueBumps=[],this.log=t}pushBump(t){this.queueBumps.push(t)}removeActor(t){let a=t.name.split("--").pop(),s=this.actorCamelized(a)+"Actor",e=this.actors[s].indexOf(t);e>-1&&this.actors[s].splice(e,1)}addActor(t){let a=t.name.split("--").pop(),s=this.actorCamelized(a)+"Actor";this.actors[s]||(this.actors[s]=[]),this.actors[s].push(t)}getActor(t,a,{resourceId:s}={}){s=s||!1;let e=this.actorCamelized(a);return this.actors[e].find(c=>c.name==t&&c.resourceId==s)}forward(t,a,{data:s,resourceId:e}={}){e=e||!1;let[c,i]=a.split("#"),r=this.getActor(t,c,{resourceId:e});r[i].call(r,s)}subscribe({channel:t,id:a}={}){let s=m();this.channel=s.subscriptions.create({channel:t,id:a},{connected:()=>{this.log&&console.log("connected"),this.queueBumps.forEach(e=>{this.forward(e.componentCssClass,e.actorAndMethod,{resourceId:e.resourceId,data:e.e})})},received:e=>{this.log&&console.log(e);let c=e.callback,i=c.component,r=c.actor,h=this.getActor(i,r,{resourceId:c.resourceId});h[c.method].call(h,e.data)},disconnected:()=>{this.log&&console.log("disconnected")}})}send(t){this.channel.perform("actorThrough",t)}actorCamelized(t){return t.split("-").map(a=>a.toUpperCase()[0]+a.slice(1)).join("")}};var l=class{constructor(t){this.element=t,this.name=this.element.dataset.controller,this.resourceId=this.element.dataset.resourceId||!1,window.Birdel.addActor(this)}replace(t,a){let e=new DOMParser().parseFromString(t,"text/html").body.firstChild;a.parentNode.replaceChild(e,a)}};var d=class{static toggleDropdown({bel:t}){t.classList.toggle("b_dw--active")}static closeDropdown({bel:t}){t.classList.remove("b_dw--active")}static toggleSelect({bel:t}){t.classList.contains("b_sel--disabled")||t.classList.toggle("b_sel--active")}static closeSel({bel:t}){t.classList.remove("b_sel--active")}static selectItem({bel:t,selItem:a}){let s=t.getElementsByClassName("b_sel__title")[0];s.innerHTML=a.innerHTML,t.dataset.bselId=a.dataset.itemId}static selectRadio({bel:t}){if(t.classList.contains("b_rad--active"))return;let a=t.dataset.bRadGroup;document.querySelectorAll(`[data-b-rad-group="${a}"]`).forEach(e=>{e.classList.remove("b_rad--active")}),t.classList.add("b_rad--active")}static toggleCheckbox({bel:t}){t.classList.contains("b_chx--active")?t.classList.remove("b_chx--active"):t.classList.add("b_chx--active")}static selectCheckbox({bel:t}){t.classList.contains("b_chx--active")||t.classList.add("b_chx--active")}static unselectCheckbox({bel:t}){t.classList.contains("b_chx--active")&&t.classList.remove("b_chx--active")}static toggleModal({bel:t}){t.classList.toggle("b_modal--active")}};var p=({belRef:o})=>{let t=o.dataset.belRef;return[...document.querySelectorAll(`[data-bel-group="${t}"]`)].map(s=>{let e=s.tagName==="TEXTAREA"||s.tagName==="INPUT"?s.value:s.innerHTML;return{[s.dataset.belName]:e}})};export{l as ActorBase,d as ActorElement,n as ActorForward,p as BFormData};
